import"./assets/modulepreload-polyfill-3cfb730f.js";import{a as T,i as p}from"./assets/vendor-ddb94854.js";function u(){const e=document.querySelector("#loader");e?e.classList.add("visible"):console.error("Loader element not found.")}function n(){const e=document.querySelector("#loader");e?e.classList.remove("visible"):console.error("Loader element not found.")}async function q(e){try{u();const t=await T(`https://books-backend.p.goit.global/books/category?category=${e}`);return n(),t.data}catch{n(),p.error({title:"",message:"Failed server request",position:"topRight"})}}async function I(){try{u();const e=await T("https://books-backend.p.goit.global/books/top-books");return n(),e.data}catch{n(),p.error({title:"",message:"Failed server request",position:"topRight"})}}const m=document.getElementById("bookModal"),A=document.getElementById("bookModalTitle");document.getElementById("bookModalText");const g=document.getElementById("addToShoppingList"),O=document.querySelector(".modal-close"),w=document.getElementById("modalADText");let a=[],l=[],j={};function y(){m.classList.remove("show"),document.body.style.overflow=""}function H(e){if(!e){console.error("Invalid bookId:",e);return}const t=a.indexOf(e);t===-1?(a.push(e),l.push(j)):(a.splice(t,1),l.splice(t,1)),localStorage.setItem("shoppingList",JSON.stringify(a)),localStorage.setItem("shoppingCard",JSON.stringify(l)),t===-1?(g.innerText="Remove from the shopping list",w.style.display="block"):(g.innerText="Add to shopping list",w.style.display="none")}g.addEventListener("click",()=>{const e=A.dataset.bookId;H(e)});m.addEventListener("click",e=>{e.target===m&&y()});document.addEventListener("keydown",e=>{e.key==="Escape"&&y()});const v=localStorage.getItem("shoppingList"),S=localStorage.getItem("shoppingCard");v&&(a=JSON.parse(v));S&&(l=JSON.parse(S));O.addEventListener("click",y);const E="ShoppingListLocalStorage";document.getElementById("pagination-list");function N(e,t){let o=window.localStorage.getItem(E);o!==null&&JSON.parse(o).length}function _(){let e=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22];localStorage.setItem(E,JSON.stringify(e))}_();N();const i=document.querySelector(".main-wrapper");i.addEventListener("click",P);const h=document.querySelector(".scroll-to-top-btn");h.addEventListener("click",J);window.addEventListener("scroll",R);function J(){window.pageYOffset>0&&window.scrollTo({top:0,behavior:"smooth"})}function R(){const e=window.pageYOffset,t=document.documentElement.clientHeight;e>t?h.classList.add("scroll-to-top-btn-show"):h.classList.remove("scroll-to-top-btn-show")}async function Y(){M(),u();try{const e=await I();V(e)}catch{p.error({title:"",message:"Whoops! Somethink went wrong",position:"topRight"})}finally{n()}}Y();async function P(e){if(!e.target.classList.contains("see-more-btn"))return;M(),u();const t=e.target.dataset.category;try{const o=await q(t);K(o)}catch{p.error({title:"",message:"Sorry, we couldn't find any books in this category",position:"topRight"})}finally{n()}}function x(e,t){return`<li class="${t}" data-id="${e._id}">
                 <div class="overlay-box">
                   <img
                     class="book-img"
                     src="${e.book_image}"
                     alt="${e.title}"
                     width="180"
                     height="256"
                   />
                   <p class="overlay-text">Quick View</p>
                 </div>
                 <div class="book-info">
                   <h3 class="book-title">${e.title}</h3>
                   <p class="book-author">${e.author}</p>
                 </div>
               </li>`}function W(e){const t=e.books.map(o=>x(o,"best-sellers-list-item")).join("");return`<div class="best-sellers-container">
             <h2 class="category-title">${e.list_name}</h2>
             <ul class="best-sellers-list">${t}</ul>
             <div class="see-more-btn-wrapper">
               <button class="see-more-btn" type="button" data-category="${e.list_name}">See more</button>
             </div>
           </div>`}function D(e){return`<ul class="category-list">${e.map(o=>x(o,"category-list-item")).join("")}</ul>`}function F(e){i.insertAdjacentHTML("beforeend",W(e))}function z(e){i.insertAdjacentHTML("beforeend",D(e))}function G(){i.insertAdjacentHTML("afterbegin",`<h1 class="main-title">
            Best Sellers <span class="accent-text">Books</span>
        </h1>`)}function Q(e){const t=e[0].list_name.split(" "),o=t.pop(),b=`${t.join(" ")} <span class="accent-text">${o}</span>`;i.insertAdjacentHTML("afterbegin",`<h1 class="main-title">${b}</h1>`)}function M(){i.innerHTML=""}function V(e){e.forEach(F),G()}function K(e){z(e),Q(e)}const f=document.querySelector(".back-top");window.addEventListener("scroll",U);f.addEventListener("click",C);function U(){const e=window.pageYOffset,t=document.documentElement.clientHeight;e>t?f.classList.add("back-top-show"):f.classList.remove("back-top-show")}function C(){window.pageYOffset>0&&(window.scrollBy(0,-25),setTimeout(C,0))}const X="/Bookshelf/assets/sprite-09556da6.svg",r=document.querySelector(".js-open-menu"),c=document.querySelector(".js-close-menu"),L=document.querySelector(".js-modal");c.insertAdjacentHTML("afterbegin",`<svg class="icon-close" width="28" height="28">
    <use href="${X}#x-close"></use>
  </svg>`);const k=new BroadcastChannel("modal-channel");r.addEventListener("click",function(){L.style.display="block",r.classList.add("hidden"),k.postMessage({action:"openModal"}),c.classList.contains("visually-hidden")&&c.classList.remove("visually-hidden"),d.style.overflowY="hidden"});c.addEventListener("click",function(){L.style.display="none",r.classList.remove("hidden"),d.style.overflowY=""});k.addEventListener("message",function(e){e.data.action==="openModal"&&(L.style.display="block",r.classList.add("hidden"))});window.addEventListener("beforeunload",function(){k.close()});const Z=document.querySelector(".div-theme"),B=document.querySelector(".span-theme"),d=document.querySelector("body");let s=!1;Z.addEventListener("change",()=>{s?(s=!1,localStorage.setItem("userTheme","light")):(s=!0,localStorage.setItem("userTheme","dark")),$()});function $(){try{s=localStorage.getItem("userTheme")==="dark"}catch{s=!1}const e=document.querySelector(".header-logo-icon"),t=document.querySelector(".header-logo-icon1");s?(d.classList.add("dark-theme"),B.style.left="20px",e.style.width="0px",t.style.width="109px"):(d.classList.remove("dark-theme"),B.style.left="2px",t.style.width="0px",e.style.width="109px")}$();window.addEventListener("DOMContentLoaded",()=>{mobMenu()});
//# sourceMappingURL=commonHelpers.js.map
