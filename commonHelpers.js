import"./assets/modulepreload-polyfill-3cfb730f.js";import{a as L,i as p}from"./assets/vendor-94296d0c.js";function m(){const e=document.querySelector("#loader");e?e.classList.add("visible"):console.error("Loader element not found.")}function n(){const e=document.querySelector("#loader");e?e.classList.remove("visible"):console.error("Loader element not found.")}async function C(e){try{m();const t=await L(`https://books-backend.p.goit.global/books/category?category=${e}`);return n(),t.data}catch{n(),p.error({title:"",message:"Failed server request",position:"topRight"})}}async function O(){try{m();const e=await L("https://books-backend.p.goit.global/books/top-books");return n(),e.data}catch{n(),p.error({title:"",message:"Failed server request",position:"topRight"})}}const M=document.querySelector(".nav-categories-list");async function j(){const{data:e}=await L.get("https://books-backend.p.goit.global/books/category-list");return e}const _=async()=>{try{const e=await j();M.innerHTML=await N(e),document.querySelectorAll(".nav-category-item").forEach(o=>{o.addEventListener("click",r=>{const w=document.querySelector(".nav-category-item.active");w&&w.classList.remove("active"),r.target.classList.add("active")})})}catch{console.log("Oops! Something went wrong")}};_();M.addEventListener("click",H);function H(e){e.target.dataset.id&&C(e)}function N(e){return`<li class="nav-category-item active" data-id="all-categories">
        All categories</li>
        ${e.map(t=>`<li class="nav-category-item" data-id="${t.list_name}">
        ${t.list_name}
        </li>`).join("")}`}const u=document.getElementById("bookModal"),J=document.getElementById("bookModalTitle");document.getElementById("bookModalText");const y=document.getElementById("addToShoppingList"),R=document.querySelector(".modal-close"),S=document.getElementById("modalADText");let i=[],c=[],Y={};function k(){u.classList.remove("show"),document.body.style.overflow=""}function P(e){if(!e){console.error("Invalid bookId:",e);return}const t=i.indexOf(e);t===-1?(i.push(e),c.push(Y)):(i.splice(t,1),c.splice(t,1)),localStorage.setItem("shoppingList",JSON.stringify(i)),localStorage.setItem("shoppingCard",JSON.stringify(c)),t===-1?(y.innerText="Remove from the shopping list",S.style.display="block"):(y.innerText="Add to shopping list",S.style.display="none")}y.addEventListener("click",()=>{const e=J.dataset.bookId;P(e)});u.addEventListener("click",e=>{e.target===u&&k()});document.addEventListener("keydown",e=>{e.key==="Escape"&&k()});const T=localStorage.getItem("shoppingList"),B=localStorage.getItem("shoppingCard");T&&(i=JSON.parse(T));B&&(c=JSON.parse(B));R.addEventListener("click",k);const x="ShoppingListLocalStorage";document.getElementById("pagination-list");function W(e,t){let o=window.localStorage.getItem(x);o!==null&&JSON.parse(o).length}function D(){let e=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22];localStorage.setItem(x,JSON.stringify(e))}D();W();const a=document.querySelector(".main-wrapper");a.addEventListener("click",Q);const h=document.querySelector(".scroll-to-top-btn");h.addEventListener("click",F);window.addEventListener("scroll",z);function F(){window.pageYOffset>0&&window.scrollTo({top:0,behavior:"smooth"})}function z(){const e=window.pageYOffset,t=document.documentElement.clientHeight;e>t?h.classList.add("scroll-to-top-btn-show"):h.classList.remove("scroll-to-top-btn-show")}async function G(){q(),m();try{const e=await O();te(e)}catch{p.error({title:"",message:"Whoops! Somethink went wrong",position:"topRight"})}finally{n()}}G();async function Q(e){if(!e.target.classList.contains("see-more-btn"))return;q(),m();const t=e.target.dataset.category;try{const o=await C(t);oe(o)}catch{p.error({title:"",message:"Sorry, we couldn't find any books in this category",position:"topRight"})}finally{n()}}function $(e,t){return`<li class="${t}" data-id="${e._id}">
                 <div class="overlay-box">
                   <img
                     class="book-img"
                     src="${e.book_image}"
                     alt="${e.title}"
                     width="180"
                     height="256"
                   />
                   <p class="overlay-text">Quick View</p>
                 </div>
                 <div class="book-info">
                   <h3 class="book-title">${e.title}</h3>
                   <p class="book-author">${e.author}</p>
                 </div>
               </li>`}function V(e){const t=e.books.map(o=>$(o,"best-sellers-list-item")).join("");return`<div class="best-sellers-container">
             <h2 class="category-title">${e.list_name}</h2>
             <ul class="best-sellers-list">${t}</ul>
             <div class="see-more-btn-wrapper">
               <button class="see-more-btn" type="button" data-category="${e.list_name}">See more</button>
             </div>
           </div>`}function K(e){return`<ul class="category-list">${e.map(o=>$(o,"category-list-item")).join("")}</ul>`}function U(e){a.insertAdjacentHTML("beforeend",V(e))}function X(e){a.insertAdjacentHTML("beforeend",K(e))}function Z(){a.insertAdjacentHTML("afterbegin",`<h1 class="main-title">
            Best Sellers <span class="accent-text">Books</span>
        </h1>`)}function ee(e){const t=e[0].list_name.split(" "),o=t.pop(),r=`${t.join(" ")} <span class="accent-text">${o}</span>`;a.insertAdjacentHTML("afterbegin",`<h1 class="main-title">${r}</h1>`)}function q(){a.innerHTML=""}function te(e){e.forEach(U),Z()}function oe(e){X(e),ee(e)}const f=document.querySelector(".back-top");window.addEventListener("scroll",se);f.addEventListener("click",A);function se(){const e=window.pageYOffset,t=document.documentElement.clientHeight;e>t?f.classList.add("back-top-show"):f.classList.remove("back-top-show")}function A(){window.pageYOffset>0&&(window.scrollBy(0,-25),setTimeout(A,0))}const ne="/Bookshelf/assets/sprite-09556da6.svg",l=document.querySelector(".js-open-menu"),d=document.querySelector(".js-close-menu"),v=document.querySelector(".js-modal");d.insertAdjacentHTML("afterbegin",`<svg class="icon-close" width="28" height="28">
    <use href="${ne}#x-close"></use>
  </svg>`);const b=new BroadcastChannel("modal-channel");l.addEventListener("click",function(){v.style.display="block",l.classList.add("hidden"),b.postMessage({action:"openModal"}),d.classList.contains("visually-hidden")&&d.classList.remove("visually-hidden"),g.style.overflowY="hidden"});d.addEventListener("click",function(){v.style.display="none",l.classList.remove("hidden"),g.style.overflowY=""});b.addEventListener("message",function(e){e.data.action==="openModal"&&(v.style.display="block",l.classList.add("hidden"))});window.addEventListener("beforeunload",function(){b.close()});const ae=document.querySelector(".div-theme"),E=document.querySelector(".span-theme"),g=document.querySelector("body");let s=!1;ae.addEventListener("change",()=>{s?(s=!1,localStorage.setItem("userTheme","light")):(s=!0,localStorage.setItem("userTheme","dark")),I()});function I(){try{s=localStorage.getItem("userTheme")==="dark"}catch{s=!1}const e=document.querySelector(".header-logo-icon"),t=document.querySelector(".header-logo-icon1");s?(g.classList.add("dark-theme"),E.style.left="20px",e.style.width="0px",t.style.width="109px"):(g.classList.remove("dark-theme"),E.style.left="2px",t.style.width="0px",e.style.width="109px")}I();window.addEventListener("DOMContentLoaded",()=>{mobMenu()});
//# sourceMappingURL=commonHelpers.js.map
