{"version":3,"file":"commonHelpers2.js","sources":["../src/images/book-shop.png","../src/shoppingListService.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAkCAYAAADl9UilAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAagSURBVHgB7ZdZTJRXFMf/MCwCMyDI4ooiCBYEBUQg7BCKKAK1UJuI2sT0wQe7JZrQWmpVsH0ohvhAgxiMsli0slVo1SBYKS6RnRQNKrvIIsywzDAwMz33UglFVgO1aTzJmQvfzL33d892zwe8lf+JCDB/soo0nNSEtIVUgTcsZurq6t/T2EOqIpWrqakVampquuINyUoCSqBR/DfQRGWA12l0w78gatra2lYElEJ/908B9Aog6Q0NDQ0PLJAsJ6DzNA7MEmiiDpMFiwnQC/MkpgT0I6Z22ZwBSUsIMIhGNbyGmBBQPI3d8wQ0UZW0fq1AIAjBLEWNJnxCY+cCAf1Dyb1yCwuLr2cD5oTRGrTgUMuWLVPFxsaq8vPzm+h/vfEQ6pOAvTfF83mTpUuXIuabGOT9koe+vj6kpqYyKEPMAGbDPk6ePMkXmE8hC+Hw4cO4dPkSdHR0kJ6ejo0bN8LExIRxaMwEpsU+vLy9OJyNjQ2odoFiAa8r7IAMKDMzE4ZGhsi6kgXLtZbQF+mjpqYGDg4OzLWKmcDElMrQ09WDlZUVHB0dcbPoJuLi4uYM99JCmZcyYWRkhKysUSCRvggVFRWwtbPFyMgImpubX5k7GViZlpYWZEMydHR0wGWLC4blwzBYbABfP1/s+2gf33A6MTQ0HLMQA8rOysbatWvHgOzs7KBQKFD3Zx0cNjqgq6uLcWiOX2Oy7kJJkz7OSM+AfFiOu3fuImhrENrb2+Ht5Y0dO3bwxaoqq3h5lEllYxMXL16MgwcPcus+f/4cDx48gL29PcQSMdpa25jL0NraColYwp/XP66Hro4unJycBD09Pb/V19c/ng5MPWpP1BdhYWFIS00D/ZgvtHfvXhTkF0Aqk6K3pxeWlpaI/jIaL7pfcAi5XI4TJ05Ae5E27t27NyOQQEMAP18/5OTmsHkC2kdJkj2dK7sryiuUDIDqC44dO4bCwkI4bnJEYmIiDPQN4OfnB0mfZDTtY2J4HAqFQoSGhsJ6nTVEonEuU466jKyCnt4ePGt/hvCwcFRXVWPbtm1IvZCKgYEBFmusTdKYDkxKwd/PTllQUMCDs+DXAhz99ihY7EVHRyMhIQEP6x5yC3R0duD27dtYv349NLU0ufs2OW4aiyEnx1EgFgrjgc6ePYuhoSH4+vrCzd0NKpXKiPY2ng4M5ubmvaV/lHJzM9Mnn0mGqYkp8vLysH37duTk5KCqqgrx8fEwNTWFp5cn9PX1IRKKoKuri+KiYv6MWb2urg67PtiFxsbGMSCCwKJFi3D8+HEcOnQI4eHhL8NKMC1YZ2dnl1KlhO07tigqKsIaizU8sDMyMuC82RlXr15FRGQErl27hoj3I7jlurq70Nffx7/X0dVBWVkZwkLDIBaL4e/vzw8hlUpZMUVycjIu/3yZlx8258L5C2xb1rfJpgWjgtpmY22D+/fvg1pkHjdFxUWgyxYqpYpdIXB3d0d+QT6Pq6dPn3LXsiQoKSlBZGQkxL1iBAQEcCAWDixZjhw5gti4WH5ANzfuPlzMuIja2lq2LbsvX7xk0JgMLCQ0pFxPqBdClsNml80ovVPKCy47bXl5OdZZr4N0UMpPyhJhd9RunsHM1YoRBTw9PTE4MAjqUmBmZobTp0/zzdl8V1dXpKelo7ysnGdwf38/j2vSRIxe7lymKuUiHz+fH/bs3vMhuVTE4m3Lli3cMuyOY5ZjQW5tbc0DvrKiEkFBQTxudu7cicHBQZ6p+/fvh0Qi4XWwpbkFLa0tHHS1+WocOHCAHZJyRFFO+8WRZo8Hm+r1Td7Y0JiXm5ubQ7VIhwLeimqMdktLC1asXIHHVAdZdTc2NkZlZSU22G/g5UOoJ+Q3BrMOu34amxp5yWExlpaWBjtbOw6UkpKiaGhoqCRXfkV7fU5aOxFgpvfKTsqmXHJRXq+k18DH28dieHhYu7u7G8uXL8ejR4+4BVhGspvAw8OD1yRW95ydneEf4M99wqr7rVu3cOrUKQW1OZVUjKNp7U9JyzDF+6cGZic1Jb+XRJG6BAcHfxb4bmCoTCYTsqAWioSoqa7BKvNVWGK8hBdgJqwroTsQ51LOsdtjhGCq6TF73UvHaN8/rcz1TbyNNrlCFrlJsWHm4uLCezdyC+wd7HlRbWpuwo3rN8DczuoUNQJP6DmzDnMZs5ByNhu9fpM1Km4UP0e3Bm8NUqOlmHtZWTmTdIZ9x+LmO9KfMAsLLYjQFeYZGBiYk5SUpKSkeEKPIrDA7flcRYj/GNBbeePyF2KfXFNKUbEtAAAAAElFTkSuQmCC\"","import { getBookById } from './js/serviceBooks';\nimport Notiflix from 'notiflix';\nimport amazon from './images/amazon.png'; \nimport appleBooks from './images/apple-books.png';\nimport bookShop from './images/book-shop.png';\nimport { showLoader, hideLoader } from './js/Loader';\n// import trash from '../images/trashh.svg#icon-bin';\nconst imageUrl = new URL('./images/trashh.svg#icon-bin', import.meta.url);\n\nNotiflix.Notify.init({\n  width: '370px',\n  position: 'center-top', // 'right-top' - 'right-bottom' - 'left-top' - 'left-bottom' - 'center-top' - 'center-bottom' - 'center-center'\n  distance: '10px',\n  opacity: 1,\n  borderRadius: '18px',\n  timeout: 4000,\n\n  ID: 'NotiflixNotify',\n  className: 'notiflix-notify',\n  fontFamily: 'DM Sans',\n  cssAnimationStyle: 'from-top', // 'fade' - 'zoom' - 'from-right' - 'from-top' - 'from-bottom' - 'from-left'\n\n  info: {\n    background: '#4F2EE8',\n    textColor: '#FFFFFF',\n    childClassName: 'notiflix-notify-info',\n  },\n  success: {\n    background: '#4F2EE8',\n    textColor: '#FFFFFF',\n    childClassName: 'notiflix-notify-success',\n    notiflixIconColor: 'rgba(0,0,0,0.2)',\n    fontAwesomeClassName: 'fas fa-check-circle',\n    fontAwesomeIconColor: 'rgba(0,0,0,0.2)',\n    backOverlayColor: 'rgba(50,198,130,0.2)',\n  },\n});\n\nexport const emptyRef = document.querySelector('.empty-shopping-list');\nconst booksList = document.querySelector('.shopping-list');\nexport let booksArray;\ntry {\n  booksArray = JSON.parse(localStorage.getItem('books'));\n} catch (error) {\n  console.log(error);\n}\nif (booksArray === null) {\n  booksArray = [];\n}\n\nrenderingShoppingList();\n\nfunction renderingShoppingList() {\n  if (!booksList) {\n    return;\n  }\n\n  const data = localStorage.getItem('books');\n  const books = JSON.parse(data);\n\n  if (books === null) {\n    emptyRef.classList.remove('visuallyhidden');\n  } else {\n    booksList.innerHTML = '';\n    const dataJSON = localStorage.getItem('books');\n    if (dataJSON) {\n      booksArray = JSON.parse(dataJSON);\n    }\n  }\n\n  if (booksArray !== null) {\n    if (booksArray.length > 0) {\n      emptyRef.classList.add('visuallyhidden');\n    }\n    for (let i = 0; i < booksArray.length; i++) {\n      const book = loadFromLocalStorage(booksArray[i]._id);\n      booksList.insertAdjacentHTML(\n        'beforeend',\n        `<div class=\"shopping-list-thumb\">\n        <div class=\"cover-shopping-list\" style=\"background-image: url('${book.book_image}'); background-size: cover;\">\n          </div>\n          <div class=\"book-interface\">\n          <div class=\"book-title-btn\">\n          <div>\n          <h2 class=\"shopping-list-book-title\">${book.title}</h2>\n            <p class=\"shopping-list-book-category\">${book.list_name}</p>\n            </div>\n          <button class=\"delete-shopping-list-btn\" type=\"button\" data-id=\"${book._id}\">\n            <svg class=\"delete-shopping-list-icon\">\n              <use href=\"${imageUrl}\"></use>\n            </svg>\n          </button>\n          </div>\n            <p class=\"shopping-list-book-about\">${book.description}</p>\n            <div class=\"shopping-list-book\">\n            <p class=\"shopping-list-book-author\">${book.author}</p>\n            <ul class=\"shopping-list-trading\">\n              <li class=\"shopping-list-trading-item\">\n                <a class=\"shopping-list-trading-link brightness\" href=\"${book.buy_links[0].url}\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <img src=\"${amazon}\" class=\"shopping-list-trading-icon-amazon\" alt=\"Amazon icon\" />\n                </a>\n              </li>\n              <li class=\"shopping-list-trading-item\">\n                <a class=\"shopping-list-trading-link\" href=\"${book.buy_links[1].url}\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <img src=\"${appleBooks}\" class=\"shopping-list-trading-icon-apple-books\" alt=\"Apple icon\" />\n                </a>\n              </li>\n              <li class=\"shopping-list-trading-item\">\n                <a class=\"shopping-list-trading-link\" href=\"${book.buy_links[2].url}\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <img src=\"${bookShop}\" class=\"shopping-list-trading-icon-book-shop\" alt=\"Book shop icon\" />\n                </a>\n              </li>\n            </ul>\n          </div>\n        </div>`\n      );\n    }\n  }\n\n  const deleteBtnRefs = document.querySelectorAll('.delete-shopping-list-btn');\n  for (let i = 0; i < deleteBtnRefs.length; i++) {\n    deleteBtnRefs[i].addEventListener('click', removingBookFromShoppingList);\n  }\n}\n\nexport async function addingToShopList(e) {\n  try {\n    showLoader();\n    const book = await getBookById(e.target.dataset.id);\n    saveToLocalStorage(book);\n    Notiflix.Notify.success('Book added to shopping list');\n    hideLoader();\n  } catch (error) {\n    hideLoader();\n    console.error('Error:', error);\n  }\n}\n\nexport function removingBookFromShoppingList(e) {\n  const id = e.currentTarget.dataset.id;\n  const index = booksArray.findIndex(book => book._id === id);\n  if (index !== -1) {\n    booksArray.splice(index, 1);\n    localStorage.setItem('books', JSON.stringify(booksArray));\n    Notiflix.Notify.info('Book removed from shopping list');\n  }\n  renderingShoppingList();\n\n  if (booksArray.length === 0) {\n    emptyRef.classList.remove('visuallyhidden');\n  }\n}\nexport { saveToLocalStorage };\nfunction saveToLocalStorage(book) {\n  try {\n    if (booksArray === null) {\n      booksArray = [];\n    }\n    booksArray.push(book);\n    const dataJSON = JSON.stringify(booksArray);\n    localStorage.setItem('books', dataJSON);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function loadFromLocalStorage(id) {\n  try {\n    const dataJSON = localStorage.getItem('books');\n    if (dataJSON) {\n      const booksArray = JSON.parse(dataJSON);\n      return booksArray.find(book => book._id === id);\n    } else {\n      return null;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n"],"names":["bookShop","imageUrl","Notiflix","emptyRef","booksList","booksArray","error","renderingShoppingList","data","dataJSON","i","book","loadFromLocalStorage","amazon","appleBooks","deleteBtnRefs","removingBookFromShoppingList","e","id","index"],"mappings":"0GAAA,MAAeA,EAAA,63ECOTC,EAAW,wEAEjBC,EAAS,OAAO,KAAK,CACnB,MAAO,QACP,SAAU,aACV,SAAU,OACV,QAAS,EACT,aAAc,OACd,QAAS,IAET,GAAI,iBACJ,UAAW,kBACX,WAAY,UACZ,kBAAmB,WAEnB,KAAM,CACJ,WAAY,UACZ,UAAW,UACX,eAAgB,sBACjB,EACD,QAAS,CACP,WAAY,UACZ,UAAW,UACX,eAAgB,0BAChB,kBAAmB,kBACnB,qBAAsB,sBACtB,qBAAsB,kBACtB,iBAAkB,sBACnB,CACH,CAAC,EAEM,MAAMC,EAAW,SAAS,cAAc,sBAAsB,EAC/DC,EAAY,SAAS,cAAc,gBAAgB,EAClD,IAAIC,EACX,GAAI,CACFA,EAAa,KAAK,MAAM,aAAa,QAAQ,OAAO,CAAC,CACvD,OAASC,EAAO,CACd,QAAQ,IAAIA,CAAK,CACnB,CACID,IAAe,OACjBA,EAAa,CAAA,GAGfE,IAEA,SAASA,GAAwB,CAC/B,GAAI,CAACH,EACH,OAGF,MAAMI,EAAO,aAAa,QAAQ,OAAO,EAGzC,GAFc,KAAK,MAAMA,CAAI,IAEf,KACZL,EAAS,UAAU,OAAO,gBAAgB,MACrC,CACLC,EAAU,UAAY,GACtB,MAAMK,EAAW,aAAa,QAAQ,OAAO,EACzCA,IACFJ,EAAa,KAAK,MAAMI,CAAQ,EAEnC,CAED,GAAIJ,IAAe,KAAM,CACnBA,EAAW,OAAS,GACtBF,EAAS,UAAU,IAAI,gBAAgB,EAEzC,QAASO,EAAI,EAAGA,EAAIL,EAAW,OAAQK,IAAK,CAC1C,MAAMC,EAAOC,EAAqBP,EAAWK,CAAC,EAAE,GAAG,EACnDN,EAAU,mBACR,YACA;AAAA,yEACiEO,EAAK,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,iDAKvCA,EAAK,KAAK;AAAA,qDACNA,EAAK,SAAS;AAAA;AAAA,4EAESA,EAAK,GAAG;AAAA;AAAA,2BAEzDV,CAAQ;AAAA;AAAA;AAAA;AAAA,kDAIeU,EAAK,WAAW;AAAA;AAAA,mDAEfA,EAAK,MAAM;AAAA;AAAA;AAAA,yEAGWA,EAAK,UAAU,CAAC,EAAE,GAAG;AAAA,8BAChEE,CAAM;AAAA;AAAA;AAAA;AAAA,8DAI0BF,EAAK,UAAU,CAAC,EAAE,GAAG;AAAA,8BACrDG,CAAU;AAAA;AAAA;AAAA;AAAA,8DAIsBH,EAAK,UAAU,CAAC,EAAE,GAAG;AAAA,8BACrDX,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,eAMtC,CACK,CACF,CAED,MAAMe,EAAgB,SAAS,iBAAiB,2BAA2B,EAC3E,QAASL,EAAI,EAAGA,EAAIK,EAAc,OAAQL,IACxCK,EAAcL,CAAC,EAAE,iBAAiB,QAASM,CAA4B,CAE3E,CAeO,SAASA,EAA6BC,EAAG,CAC9C,MAAMC,EAAKD,EAAE,cAAc,QAAQ,GAC7BE,EAAQd,EAAW,UAAUM,GAAQA,EAAK,MAAQO,CAAE,EACtDC,IAAU,KACZd,EAAW,OAAOc,EAAO,CAAC,EAC1B,aAAa,QAAQ,QAAS,KAAK,UAAUd,CAAU,CAAC,EACxDH,EAAS,OAAO,KAAK,iCAAiC,GAExDK,IAEIF,EAAW,SAAW,GACxBF,EAAS,UAAU,OAAO,gBAAgB,CAE9C,CAeO,SAASS,EAAqBM,EAAI,CACvC,GAAI,CACF,MAAMT,EAAW,aAAa,QAAQ,OAAO,EAC7C,OAAIA,EACiB,KAAK,MAAMA,CAAQ,EACpB,KAAKE,GAAQA,EAAK,MAAQO,CAAE,EAEvC,IAEV,OAAQZ,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH"}